(function(e){function t(t){for(var r,i,u=t[0],a=t[1],c=t[2],f=0,g=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&g.push(s[i][0]),s[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);p&&p(t);while(g.length)g.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,u=1;u<n.length;u++){var a=n[u];0!==s[a]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var p=a;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],i=(n("5c0b"),n("2877")),u={},a=Object(i["a"])(u,s,o,!1,null,null,null),c=a.exports,p=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["0"==e.isActive?n("div",[n("choose")],1):e._e(),"1"==e.isActive?n("div",[n("conversation")],1):e._e(),"2"==e.isActive?n("div",[n("message")],1):e._e(),n("div",[n("p",[e._v(" "+e._s(JSON.stringify(e.userId))+" "+e._s(e.isActive)+" ")]),e._v(" "+e._s(e.loading)+" "),e.loading?n("p",[e._v("等待中.....")]):e._e()])])},g=[],l=(n("4160"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" choose ")])}),d=[],v={name:"choose"},m=v,M=Object(i["a"])(m,l,d,!1,null,"0e7ad65e",null),h=M.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" conversation ")])},y=[],b={name:"conversation",data:function(){return{userInfo:"",toUserInfo:""}},mounted:function(){this.$route.query.userInfo&&(this.userInfo=JSON.parse(this.$route.query.userInfo))}},S=b,C=Object(i["a"])(S,I,y,!1,null,"0dc6cc4b",null),w=C.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" message ")])},D=[],U={name:"message",data:function(){return{}}},j=U,N=Object(i["a"])(j,L,D,!1,null,"24ac4bf5",null),x=N.exports,A=[{user:"tsj",userId:"1",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zLBwoZQweKU7MSCgswUJStDEwMDI3NzM0tLiExqRUFmUSpQ3NTU1MjAwAAiWpKZCxYzNzEwM7KwMIGakpkONDM7INE8P883w6SgSju01M0wSrvEIrTQv9gr1y8tK6XIwywxudzdNSPNO8PRVqkWABv6MB4_",img:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1735490596,2760195857&fm=26&gp=0.jpg"},{user:"user1",userId:"2",img:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2262632647,543198910&fm=26&gp=0.jpg",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zIhwlDB4pTsxIKCzBQlK0MTAwMjc3MzS0uITGpFQWZRKlDc1NTUyMDAACJakpkLFjM3MTAzsrA0gpqSmQ40s7g03NArOcfXTTut1NDVw6ky0DncszixMi8kKSk10MTUPNM00qAsLc07xMBWqRYAEZgvdA__"},{user:"user2",userId:"3",img:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=366135374,1364401596&fm=26&gp=0.jpg",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zLBwsZQweKU7MSCgswUJStDEwMDI3NzM0tLiExqRUFmUSpQ3NTU1MjAwAAiWpKZCxYzNzEwM7IwNoWakpkONLMkyNfEPMut0DTR0708LTDMJTRKO6zSNTG5qCDA2KDCNTcp0SfRoDS8PN-XVqkWAA9iL98_"},{user:"user3",userId:"4",img:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=275868592,2250122918&fm=26&gp=0.jpg",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zLBwiZQweKU7MSCgswUJStDEwMDI3NzM0tLiExqRUFmUSpQ3NTU1MjAwAAiWpKZCxYzNzEwM7IwgaotzkwHmlmc4*aUVxJgkhUYEZJonJ5oFpTrG6OvbZrpHBFe6Bri75RbaZBTbujllhVoYKtUCwBATC*g"},{user:"user4",userId:"5",img:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2473035870,2692619587&fm=26&gp=0.jpg",userSig:"eJwtzMEKgkAUheF3udtCbtNcR4U2QQRhGRqBy2DGuE3GMFlo0bsn6vJ8B-4vnNIieBsPCYgAYT5s1ubRcMUD04RPbS-OsYZkIRGFUmEcj49pHXvTOxEJRBy14XowJTEUUUhTha9980yZOUius1Lujl1eLPdys-20vipTn5a3dT572Uh1dG-tCn5-CoIvrQ__"},{user:"user5",userId:"6",img:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=3293099503,606929711&fm=26&gp=0.jpg",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zLBwmZQweKU7MSCgswUJStDEwMDI3NzM0tLiExqRUFmUSpQ3NTU1MjAwAAiWpKZCxYzNzEwM7I0MYSakpkONDPHPdinLDnE0DE71bkwNcu5ODmjzF87LSOoKs27rDAyKdk9yz*nJLzMv9zVVqkWAC2JMQA_"},{user:"user6",userId:"7",img:"https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1643922863,2228588017&fm=26&gp=0.jpg",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zLBwuZQweKU7MSCgswUJStDEwMDI3NzM0tLiExqRUFmUSpQ3NTU1MjAwAAiWpKZCxYzNzEwM7I0NYWakpkONDPIOMvRMim1sjQ-Rj-K19wrKT*gINWgMDffLDA5J90yLUbfwC3btyIjPaA429NWqRYAfDQwzw__"},{user:"11111111111",userId:"8",img:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1179876196,102524513&fm=26&gp=0.jpg",userSig:"eJwtzFELgjAUhuH-suuw49xcE7qKIYTVaHrXTbBTHEIZJquI-nuiXn7PB**X1ZVLIvasYDwBtpo2eewGutHEmwWf-nENgTwrUgHAlcq1nh98B*pxdCklB4BZB2onUwJyrlW6VOg*NqnU8uzaDKW9rDth9wfTVNGjO1JtnD3h67MzdRp5mTVb9vsDLfEvPA__"},{user:"22222222222",userId:"9",img:"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3206878631,547916318&fm=26&gp=0.jpg",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zLBwpZQweKU7MSCgswUJStDEwMDI3NzM0tLiExqRUFmUSpQ3NTU1MjAwAAiWpKZCxYzNzEwM7K0MIGakpkONDPPNS283MPN3TLIM9mx2DexzDjL06UyvzzULTA3OUY-Jd0o16nIJUbfJC00O9lWqRYAfNUwkg__"},{user:"中介",userId:"10",img:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1779444511,689185070&fm=26&gp=0.jpg",userSig:"eJw1zF0LgjAYhuH-suOQ1*k2JnSQZ5L0KdSpsbVeJB3OiRH992TW4XM9cL9JVZ6jUfckIzQCsgoblW4HvGPg*K9ONbW1qEgWpwBUCC7l8ujJYq9nZ4xRAFh0wGcwkQKnMqG-Cpo56sfi0J3ypC5zMcnr5rbtVHvZHZV-ee5Mg-uuSmVh4OHW5PMFPp0wYQ__"}],O=A,k={name:"index",data:function(){return{isActive:0,userId:"",loading:!0,userInfo:""}},components:{choose:h,conversation:w,message:x},methods:{loginTim:function(){var e=this;O.forEach((function(t){t.userId==e.userId&&(e.userInfo=t)})),this.userInfo&&this.tim.login({userID:this.userInfo.userId,userSig:this.userInfo.userSig}).then((function(t){e.loading=!1,e.$store.commit("toggleIsLogin",!0),e.$store.commit("startComputeCurrent"),console.log(t)})).catch((function(t){e.loading=!1,console.log(t)}))}},created:function(){this.userId="6",this.loginTim()},mounted:function(){}},_=k,z=Object(i["a"])(_,f,g,!1,null,"6b1882ff",null),T=z.exports;r["default"].use(p["a"]);var K=[{path:"/",name:"",component:T}],R=new p["a"]({mode:"hash",base:"",routes:K}),E=R,G=(n("0d03"),n("2f62")),P=(n("99af"),n("4de4"),n("d81d"),n("13d5"),n("d3b7"),n("ac1f"),n("5319"),n("284c")),Q=n("02ba"),J=n.n(Q),Y=n("e23e"),F=n.n(Y),H={state:{currentConversation:{},currentMessageList:[],nextReqMessageID:"",isCompleted:!1,conversationList:[]},getters:{toAccount:function(e){if(!e.currentConversation||!e.currentConversation.conversationID)return"";switch(e.currentConversation.type){case"C2C":return e.currentConversation.conversationID.replace("C2C","");case"GROUP":return e.currentConversation.conversationID.replace("GROUP","");default:return e.currentConversation.conversationID}},currentConversationType:function(e){return e.currentConversation&&e.currentConversation.type?e.currentConversation.type:""},totalUnreadCount:function(e){return e.conversationList.reduce((function(t,n){return n.conversationID===e.currentConversation.conversationID?t:"GROUP"===n.type&&"AcceptNotNotify"===n.groupProfile.selfInfo.messageRemindType?t:t+n.unreadCount}),0)},imgUrlList:function(e){return e.currentMessageList.filter((function(e){return e.type===F.a.TYPES.MSG_IMAGE})).map((function(e){return e.payload.imageInfoArray[0].url}))}},mutations:{updateCurrentConversation:function(e,t){e.currentConversation=t,e.currentMessageList=[],e.nextReqMessageID="",e.isCompleted=!1},updateConversationList:function(e,t){e.conversationList=t},resetCurrentConversation:function(e){e.currentConversation={}},pushCurrentMessageList:function(e,t){if(e.currentConversation.conversationID)if(Array.isArray(t)){var n=t.filter((function(t){return t.conversationID===e.currentConversation.conversationID}));e.currentMessageList=[].concat(Object(P["a"])(e.currentMessageList),Object(P["a"])(n))}else t.conversationID===e.currentConversation.conversationID&&(e.currentMessageList=[].concat(Object(P["a"])(e.currentMessageList),[t]))},reset:function(e){Object.assign(e,{currentConversation:{},currentMessageList:[],nextReqMessageID:"",isCompleted:!1,conversationList:[]})}},actions:{getMessageList:function(e,t){if(e.state.isCompleted)e.commit("showMessage",{message:"已经没有更多的历史消息了哦",type:"info"});else{var n=e.state,r=n.nextReqMessageID,s=n.currentMessageList;J.a.getMessageList({conversationID:t,nextReqMessageID:r,count:15}).then((function(t){e.state.nextReqMessageID=t.data.nextReqMessageID,e.state.isCompleted=t.data.isCompleted,e.state.currentMessageList=[].concat(Object(P["a"])(t.data.messageList),Object(P["a"])(s))}))}},checkoutConversation:function(e,t){if(e.commit("resetCurrentMemberList"),e.state.currentConversation.conversationID){var n=e.state.currentConversation.conversationID;J.a.setMessageRead({conversationID:n})}return J.a.setMessageRead({conversationID:t}),J.a.getConversationProfile(t).then((function(n){var r=n.data;return e.commit("updateCurrentConversation",r.conversation),e.dispatch("getMessageList",t),r.conversation.type===F.a.TYPES.CONV_GROUP?e.dispatch("getGroupMemberList",r.conversation.groupProfile.groupID):Promise.resolve()}))}}},W=H,B={state:{groupList:[],currentMemberList:[],createGroupModelVisible:!1},getters:{hasGroupList:function(e){return e.groupList.length>0}},mutations:{updateGroupList:function(e,t){e.groupList=t},updateCreateGroupModelVisible:function(e,t){e.createGroupModelVisible=t},updateCurrentMemberList:function(e,t){e.currentMemberList=[].concat(Object(P["a"])(e.currentMemberList),Object(P["a"])(t))},resetCurrentMemberList:function(e){e.currentMemberList=[]},reset:function(e){Object.assign(e,{groupList:[],currentMemberList:[],createGroupModelVisible:!1})}},actions:{updateGroupList:function(e,t){e.commit("updateGroupList",t)},getGroupMemberList:function(e,t){return J.a.getGroupMemberList({groupID:t,offset:e.state.currentMemberList.length,count:30}).then((function(t){return e.commit("updateCurrentMemberList",t.data.memberList),t}))}}},q=B,V=n("3438"),Z=n.n(V),X=F.a.create({SDKAppID:1400277699});window.setLogLevel=X.setLogLevel,X.setLogLevel(4),X.registerPlugin({"cos-js-sdk":Z.a});var $=X,ee={state:{currentUserProfile:{},isLogin:!1,isSDKReady:!1},mutations:{updateCurrentUserProfile:function(e,t){e.currentUserProfile=t},toggleIsLogin:function(e,t){e.isLogin="undefined"===typeof t?!e.isLogin:t},toggleIsSDKReady:function(e,t){e.isSDKReady="undefined"===typeof t?!e.isSDKReady:t},reset:function(e){Object.assign(e,{currentUserProfile:{},isLogin:!1,isSDKReady:!1})}},actions:{logout:function(e){e.rootState.conversation.currentConversation.conversationID&&$.setMessageRead({conversationID:e.rootState.conversation.currentConversation.conversationID}),$.logout().then((function(){e.commit("toggleIsLogin"),e.commit("stopComputeCurrent"),e.commit("reset")}))}}},te=ee,ne={state:{friendList:[],createGroupModelVisible:!1},mutations:{upadteFriendList:function(e,t){e.friendList=t},reset:function(e){Object.assign(e,{friendList:[],createGroupModelVisible:!1})}}},re=ne,se={state:{blacklist:[]},mutations:{updateBlacklist:function(e,t){e.blacklist=t},removeFromBlacklist:function(e,t){e.blacklist=e.blacklist.filter((function(e){return e.userID!==t}))},reset:function(e){Object.assign(e,{blacklist:[]})}},actions:{getBlacklist:function(e){$.getBlacklist().then((function(e){var t=e.data;return $.getUserProfile({userIDList:t})})).then((function(t){var n=t.data;e.commit("updateBlacklist",n)}))}}},oe=se,ie=n("5c96");r["default"].use(G["a"]);var ue=new G["a"].Store({state:{current:Date.now(),intervalID:0,message:void 0},mutations:{startComputeCurrent:function(e){e.intervalID=setInterval((function(){e.current=Date.now()}),1e3)},stopComputeCurrent:function(e){clearInterval(e.intervalID),e.intervalID=0},showMessage:function(e,t){e.message&&e.message.close(),e.message=Object(ie["Message"])({message:t.message,type:t.type||"success",duration:t.duration||2e3,offset:40})}},modules:{conversation:W,group:q,friend:re,blacklist:oe,user:te}}),ae=n("c7d6"),ce=n.n(ae),pe={};console.log("开始调用ctrl");var fe="http://192.168.1.168:8089/durian";pe.getUserSig=function(e,t){ce.a.call(fe+"/user/getUserSig",e,t)};var ge=pe,le=n("bc3a"),de=n.n(le);de.a.defaults.headers={"Content-Type":"text/plain"},window.tim=$,window.TIM=F.a,r["default"].config.productionTip=!1,r["default"].prototype.tim=$,r["default"].prototype.TIM=F.a,r["default"].prototype.$api=ge,r["default"].prototype.$axios=de.a,new r["default"]({router:E,store:ue,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),s=n.n(r);s.a},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},"9c0c":function(e,t,n){}});
//# sourceMappingURL=app.7e1ef091.js.map